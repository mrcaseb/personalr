<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to personalr • personalr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to personalr">
<meta property="og:description" content="personalr">
<meta property="og:image" content="https://mrcaseb.github.io/personalr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">personalr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/personalr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://patreon.com/mrcaseb">
    <span class="fas fa fas fa-heart fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="http://twitter.com/mrcaseb">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/mrcaseb/personalr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="personalr_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to personalr</h1>
                        <h4 class="author">Sebastian Carl</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrcaseb/personalr/blob/master/vignettes/personalr.Rmd"><code>vignettes/personalr.Rmd</code></a></small>
      <div class="hidden name"><code>personalr.Rmd</code></div>

    </div>

    
    
<div id="acknowledgement" class="section level1">
<h1 class="hasAnchor">
<a href="#acknowledgement" class="anchor"></a>Acknowledgement</h1>
<p>Setting up an R package isn’t really intuitive as the developer needs a basic understanding of some package conventions and good practice methods. There are multiple packages in the R landscape that help doing exactly this. <code>personalr</code> makes heavy usage of the most important package development helper package: <a href="https://usethis.r-lib.org/"><code>usethis</code></a>. It has a ton of useful functions but the developer has to know which of them is needed for the individual purpose.</p>
<p><code>personalr</code> is more or less a wrapper around several usethis functions and completes the whole thing with some helper functions. The package setup that personalr creates is also based on the <a href="https://tidyverse.tidyverse.org/"><code>tidyverse</code></a> package.</p>
<p>Everything you need to know about R package development is perfectly summarized in <a href="https://r-pkgs.org/">Hadley Wickham’s book R Packages</a>.</p>
</div>
<div id="usage" class="section level1">
<h1 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h1>
<div id="first-setup" class="section level2">
<h2 class="hasAnchor">
<a href="#first-setup" class="anchor"></a>First setup</h2>
<p>The main function of <code>personalr</code> is <code><a href="../reference/setup_package.html">setup_package()</a></code>. Handed a valid path, the desired package name and a vector or list of package names (the ‘core’ of the personal package that is about to be created) it does the following things:</p>
<ul>
<li>create the project with the intended package name</li>
<li>create all basic package files like DESCRIPTION (including the Imports of the ‘core’ packages), NAMESPACE or the “R” directory</li>
<li>create a basic Readme</li>
<li>create all scripts and functions in the R directory that are required to attach the core packages</li>
<li>add the pipe operator <code>magrittr::%&gt;%()</code> to your exported functions so it is usable as soon as the package is loaded</li>
<li>document and install the package</li>
<li>open the new package in a separate R session.</li>
</ul>
<p>The following example creates the new package <code>"mypackage"</code> with the <code>core</code> packages dplyr, glue and purrr in a temporary directory.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/mrcaseb/personalr">personalr</a></span><span class="op">)</span>
<span class="va">temp_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="../reference/setup_package.html">setup_package</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">temp_directory</span>, packagename <span class="op">=</span> <span class="st">"mypackage"</span>, core <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"glue"</span>, <span class="st">"purrr"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; ✔ Creating '/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage/'
#&gt; ✔ Setting active project to '/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage'
#&gt; ✔ Creating 'R/'
#&gt; ✔ Writing 'DESCRIPTION'
#&gt; Package: mypackage
#&gt; Title: What the Package Does (One Line, Title Case)
#&gt; Version: 1.0.0
#&gt; Authors@R (parsed):
#&gt;     * First Last &lt;first.last@example.com&gt; [aut, cre] (YOUR-ORCID-ID)
#&gt; Description: What the package does (one paragraph).
#&gt; License: `use_mit_license()`, `use_gpl3_license()` or friends to pick a
#&gt;     license
#&gt; Encoding: UTF-8
#&gt; LazyData: true
#&gt; Roxygen: list(markdown = TRUE)
#&gt; RoxygenNote: 7.1.1
#&gt; ✔ Writing 'NAMESPACE'
#&gt; ✔ Setting active project to '&lt;no active project&gt;'
#&gt; ✔ Setting active project to '/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage'
#&gt; ✔ Writing 'R/mypackage-package.R'
#&gt; ✔ Writing 'README.md'
#&gt; ✔ Adding 'dplyr' to Imports field in DESCRIPTION
#&gt; ✔ Adding 'glue' to Imports field in DESCRIPTION
#&gt; ✔ Adding 'purrr' to Imports field in DESCRIPTION
#&gt; ✔ Adding 'cli' to Imports field in DESCRIPTION
#&gt; ✔ Adding 'crayon' to Imports field in DESCRIPTION
#&gt; ✔ Adding 'rstudioapi' to Imports field in DESCRIPTION
#&gt; ✔ Writing 'R/core.R'
#&gt; ✔ Writing 'R/attach.R'
#&gt; ✔ Writing 'R/conflicts.R'
#&gt; ✔ Writing 'R/pipe.R'
#&gt; ✔ Writing 'R/utils.R'
#&gt; ✔ Writing 'R/zzz.R'
#&gt; ● Updating documentation and installing mypackage...
#&gt; Loading mypackage
#&gt; ── Attaching packages ─────────────────────────────────────── mypackage 1.0.0 ──
#&gt; ✔ dplyr 1.0.2     ✔ purrr 0.3.4
#&gt; ✔ glue  1.4.2
#&gt; ──────────────────────────────────────────────────────────────── Ready to go! ──
#&gt; 
#&gt; Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
#&gt;   /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage \
#&gt;   --install-tests 
#&gt; * installing to library ‘/Users/runner/work/_temp/Library’
#&gt; * installing *source* package ‘mypackage’ ...
#&gt; ** using staged installation
#&gt; ** R
#&gt; ** byte-compile and prepare package for lazy loading
#&gt; ** help
#&gt; *** installing help indices
#&gt; ** building package indices
#&gt; ** testing if installed package can be loaded from temporary location
#&gt; ** testing if installed package can be loaded from final location
#&gt; ** testing if installed package keeps a record of temporary installation path
#&gt; * DONE (mypackage)
#&gt; ✔ Changing working directory to '/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage/'
#&gt; ✔ Setting active project to '&lt;no active project&gt;'</code></pre>
<p>Once the setup is finished and the new package installed, the new package should be opened in a separate R session. It will show the following files and directories</p>
<pre><code>#&gt; /var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage
#&gt; ├── DESCRIPTION
#&gt; ├── NAMESPACE
#&gt; ├── R
#&gt; │   ├── attach.R
#&gt; │   ├── conflicts.R
#&gt; │   ├── core.R
#&gt; │   ├── mypackage-package.R
#&gt; │   ├── pipe.R
#&gt; │   ├── utils.R
#&gt; │   └── zzz.R
#&gt; ├── README.md
#&gt; └── man
#&gt;     ├── mypackage-package.Rd
#&gt;     └── pipe.Rd</code></pre>
</div>
<div id="update-your-package" class="section level2">
<h2 class="hasAnchor">
<a href="#update-your-package" class="anchor"></a>Update your package</h2>
<p>There are basically two reasons why you want to update your personal package:</p>
<ol style="list-style-type: decimal">
<li>You want to update the list of <code>core</code> packages</li>
<li>You want to add a helper function so you can call it when the package is loaded (i.e. ‘export’ a function)</li>
</ol>
<div id="update-your-core-packages" class="section level3">
<h3 class="hasAnchor">
<a href="#update-your-core-packages" class="anchor"></a>Update your ‘core’ packages</h3>
<p>There is a separate function in <code>personalr</code> to update your list of <code>core</code> packages: <code><a href="../reference/update_core.html">update_core()</a></code>. It can either append new packages to the existing <code>core</code> or overwrite it completely (with the logical argument <code>append</code>).</p>
<p>Assuming you have run the above code and have created the personal package <code>"mypackage"</code> with the <code>core</code> packages “dplyr”, “glue” and “purrr” you can add another package, e.g. “tibble” by running the following code (please note that the example uses temporary directories and if you run this on your machine it’s easier to open the project and set <code>path = "."</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/update_core.html">update_core</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">temp_directory</span>, packagename <span class="op">=</span> <span class="st">"mypackage"</span>, core <span class="op">=</span> <span class="st">"tibble"</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code>#&gt; ✔ Setting active project to '/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage'
#&gt; ✔ Adding 'tibble' to Imports field in DESCRIPTION
#&gt; ℹ If you really want to update your core you'll have toconfirm the following dialogue...!
#&gt; ✔ Leaving 'R/core.R' unchanged
#&gt; ✔ Setting Version field in DESCRIPTION to '1.0.1'
#&gt; ● Updating documentation and installing mypackage...
#&gt; Loading mypackage
#&gt; 
#&gt; Running /Library/Frameworks/R.framework/Resources/bin/R CMD INSTALL \
#&gt;   /private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/RtmpTSVdun/mypackage \
#&gt;   --install-tests 
#&gt; * installing to library ‘/Users/runner/work/_temp/Library’
#&gt; * installing *source* package ‘mypackage’ ...
#&gt; ** using staged installation
#&gt; ** R
#&gt; ** byte-compile and prepare package for lazy loading
#&gt; ** help
#&gt; *** installing help indices
#&gt; ** building package indices
#&gt; ** testing if installed package can be loaded from temporary location
#&gt; ** testing if installed package can be loaded from final location
#&gt; ** testing if installed package keeps a record of temporary installation path
#&gt; * DONE (mypackage)
#&gt; ✔ Setting active project to '&lt;no active project&gt;'</code></pre>
<p>Now <code>"mypackage"</code> attaches “dplyr”, “glue”, “purrr” and “tibble” when it is loaded. If you want to overwrite the core (i.e. only use “tibble” and drop the other packages) just set <code>append = FALSE</code> in the above code chunk.</p>
</div>
<div id="add-your-own-exported-helper-function" class="section level3">
<h3 class="hasAnchor">
<a href="#add-your-own-exported-helper-function" class="anchor"></a>Add your own exported helper function</h3>
<p>One of the strengths of a package is that you are able to save your helper functions inside the package and make them available in your code without littering the Global Environment.</p>
<p>Let’s say you often use the negated version of <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code> to select values that are <em>not</em> in a vector. The typical way to do it is <code>!value %in% vector</code>. This is somewhat annoying as it’s hard to read the code and see the exclamation mark at the beginning of the expression. So now we want to write and export our own little helper for the negated version of <code><a href="https://rdrr.io/r/base/match.html">%in%</a></code>, and we call it <code>%nin%</code>.</p>
<p>If you run this inside your project</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_r.html">use_r</a></span><span class="op">(</span><span class="st">"nin"</span><span class="op">)</span></code></pre></div>
<p>it will create a new script <code>"R/nin.R"</code> and open it directly. Add the code of your helper function and don’t forget to export it with <code>#' @export</code> (this means the next time you document and install your package the new function will be exported and available for usage).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#' @export</span>
<span class="st">'%nin%'</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/negate.html">negate</a></span><span class="op">(</span><span class="va">`%in%`</span><span class="op">)</span></code></pre></div>
<p>To update your package you should consider changing the package version to make more clear something changed by running</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html">use_version</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>and afterwards documenting and installing the new version by running</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/document.html">document</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/install.html">install</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/mrcaseb">Sebastian Carl</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
