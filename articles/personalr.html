<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to personalr • personalr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/IBM_Plex_Sans-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Kanit-0.4.9/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Introduction to personalr">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">personalr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/personalr.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://patreon.com/mrcaseb"><span class="fa fas fa-heart fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://bsky.app/profile/mrcaseb.nflverse.com"><span class="fa fa-brands fa-bluesky fa-lg"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/mrcaseb/personalr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Introduction to personalr</h1>
                        <h4 data-toc-skip class="author">Sebastian
Carl</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mrcaseb/personalr/blob/main/vignettes/personalr.Rmd" class="external-link"><code>vignettes/personalr.Rmd</code></a></small>
      <div class="d-none name"><code>personalr.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="acknowledgement">Acknowledgement<a class="anchor" aria-label="anchor" href="#acknowledgement"></a>
</h2>
<p>Setting up an R package isn’t really intuitive as the developer needs
a basic understanding of some package conventions and good practice
methods. There are multiple packages in the R landscape that help doing
exactly this. <code>personalr</code> makes heavy usage of the most
important package development helper package: <a href="https://usethis.r-lib.org/" class="external-link"><code>usethis</code></a>. It has a ton
of useful functions but the developer has to know which of them is
needed for the individual purpose.</p>
<p><code>personalr</code> is more or less a wrapper around several
usethis functions and completes the whole thing with some helper
functions. The package setup that personalr creates is also based on the
<a href="https://tidyverse.tidyverse.org/" class="external-link"><code>tidyverse</code></a>
package.</p>
<p>Everything you need to know about R package development is perfectly
summarized in <a href="https://r-pkgs.org/" class="external-link">Hadley Wickham’s book R
Packages</a>.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<div class="section level3">
<h3 id="first-setup">First setup<a class="anchor" aria-label="anchor" href="#first-setup"></a>
</h3>
<p>The main function of <code>personalr</code> is
<code><a href="../reference/setup_package.html">setup_package()</a></code>. Handed a valid path, the desired package
name and a vector or list of package names (the ‘core’ of the personal
package that is about to be created) it does the following things:</p>
<ul>
<li>create the project with the intended package name</li>
<li>create all basic package files like DESCRIPTION (including the
Imports of the ‘core’ packages), NAMESPACE or the “R” directory</li>
<li>create a basic Readme</li>
<li>create all scripts and functions in the R directory that are
required to attach the core packages</li>
<li>add the pipe operator <code>magrittr::%&gt;%()</code> to your
exported functions so it is usable as soon as the package is loaded</li>
<li>document and install the package</li>
<li>open the new package in a separate R session.</li>
</ul>
<p>The following example creates the new package
<code>"mypackage"</code> with the <code>core</code> packages dplyr, glue
and purrr in a temporary directory.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mrcaseb.github.io/personalr/index.html">personalr</a></span><span class="op">)</span></span>
<span><span class="va">temp_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/setup_package.html">setup_package</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">temp_directory</span>, packagename <span class="op">=</span> <span class="st">"mypackage"</span>, core <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"dplyr"</span>, <span class="st">"glue"</span>, <span class="st">"purrr"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; ✔ Creating '/tmp/RtmpuQ1QEZ/mypackage/'.</span></span>
<span><span class="co">#&gt; ✔ Setting active project to "/tmp/RtmpuQ1QEZ/mypackage".</span></span>
<span><span class="co">#&gt; ✔ Creating 'R/'.</span></span>
<span><span class="co">#&gt; ✔ Writing 'DESCRIPTION'.</span></span>
<span><span class="co">#&gt; Package: mypackage</span></span>
<span><span class="co">#&gt; Title: What the Package Does (One Line, Title Case)</span></span>
<span><span class="co">#&gt; Version: 1.0.0</span></span>
<span><span class="co">#&gt; Authors@R (parsed):</span></span>
<span><span class="co">#&gt;     * First Last &lt;first.last@example.com&gt; [aut, cre]</span></span>
<span><span class="co">#&gt; Description: What the package does (one paragraph).</span></span>
<span><span class="co">#&gt; License: `use_mit_license()`, `use_gpl3_license()` or friends to pick a</span></span>
<span><span class="co">#&gt;     license</span></span>
<span><span class="co">#&gt; Encoding: UTF-8</span></span>
<span><span class="co">#&gt; Roxygen: list(markdown = TRUE)</span></span>
<span><span class="co">#&gt; RoxygenNote: 7.3.2</span></span>
<span><span class="co">#&gt; ✔ Writing 'NAMESPACE'.</span></span>
<span><span class="co">#&gt; ✔ Setting active project to "&lt;no active project&gt;".</span></span>
<span><span class="co">#&gt; ✔ Setting active project to "/tmp/RtmpuQ1QEZ/mypackage".</span></span>
<span><span class="co">#&gt; ✔ Writing 'R/mypackage-package.R'.</span></span>
<span><span class="co">#&gt; ✔ Writing 'README.md'.</span></span>
<span><span class="co">#&gt; ✔ Adding 'dplyr' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Adding 'glue' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Adding 'purrr' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Adding 'cli' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Adding 'crayon' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Adding 'rstudioapi' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ✔ Writing 'R/core.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Writing 'R/attach.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Writing 'R/conflicts.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Writing 'R/pipe.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Writing 'R/utils.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Writing 'R/zzz.R'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Updating documentation and installing mypackage...</span></span>
<span><span class="co">#&gt; Writing 'NAMESPACE'</span></span>
<span><span class="co">#&gt; ℹ Loading mypackage</span></span>
<span><span class="co">#&gt; ── Attaching packages ─────────────────────────────────────── mypackage 1.0.0 ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ dplyr 1.1.4     ✔ purrr 1.0.4</span></span>
<span><span class="co">#&gt; ✔ glue  1.8.0     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ──────────────────────────────────────────────────────────────── Ready to go! ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✖ conflicts.R:51: S3 method `print.mypackage_conflicts` needs @export or</span></span>
<span><span class="co">#&gt;   @exportS3method tag.</span></span>
<span><span class="co">#&gt; Writing 'NAMESPACE'</span></span>
<span><span class="co">#&gt; Writing 'mypackage-package.Rd'</span></span>
<span><span class="co">#&gt; Writing 'pipe.Rd'</span></span>
<span><span class="co">#&gt; Running /opt/R/4.4.3/lib/R/bin/R CMD INSTALL /tmp/RtmpuQ1QEZ/mypackage \</span></span>
<span><span class="co">#&gt;   --install-tests </span></span>
<span><span class="co">#&gt; * installing to library ‘/home/runner/work/_temp/Library’</span></span>
<span><span class="co">#&gt; * installing *source* package ‘mypackage’ ...</span></span>
<span><span class="co">#&gt; ** using staged installation</span></span>
<span><span class="co">#&gt; ** R</span></span>
<span><span class="co">#&gt; ** byte-compile and prepare package for lazy loading</span></span>
<span><span class="co">#&gt; ** help</span></span>
<span><span class="co">#&gt; *** installing help indices</span></span>
<span><span class="co">#&gt; ** building package indices</span></span>
<span><span class="co">#&gt; ** testing if installed package can be loaded from temporary location</span></span>
<span><span class="co">#&gt; ** testing if installed package can be loaded from final location</span></span>
<span><span class="co">#&gt; ** testing if installed package keeps a record of temporary installation path</span></span>
<span><span class="co">#&gt; * DONE (mypackage)</span></span>
<span><span class="co">#&gt; ✔ Setting active project to "&lt;no active project&gt;".</span></span></code></pre>
<p>Once the setup is finished and the new package installed, the new
package should be opened in a separate R session. It will show the
following files and directories</p>
<pre><code><span><span class="co">#&gt; /tmp/RtmpuQ1QEZ/mypackage</span></span>
<span><span class="co">#&gt; ├── DESCRIPTION</span></span>
<span><span class="co">#&gt; ├── NAMESPACE</span></span>
<span><span class="co">#&gt; ├── R</span></span>
<span><span class="co">#&gt; │   ├── attach.R</span></span>
<span><span class="co">#&gt; │   ├── conflicts.R</span></span>
<span><span class="co">#&gt; │   ├── core.R</span></span>
<span><span class="co">#&gt; │   ├── mypackage-package.R</span></span>
<span><span class="co">#&gt; │   ├── pipe.R</span></span>
<span><span class="co">#&gt; │   ├── utils.R</span></span>
<span><span class="co">#&gt; │   └── zzz.R</span></span>
<span><span class="co">#&gt; ├── README.md</span></span>
<span><span class="co">#&gt; └── man</span></span>
<span><span class="co">#&gt;     ├── mypackage-package.Rd</span></span>
<span><span class="co">#&gt;     └── pipe.Rd</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="update-your-package">Update your package<a class="anchor" aria-label="anchor" href="#update-your-package"></a>
</h3>
<p>There are basically two reasons why you want to update your personal
package:</p>
<ol style="list-style-type: decimal">
<li>You want to update the list of <code>core</code> packages</li>
<li>You want to add a helper function so you can call it when the
package is loaded (i.e. ‘export’ a function)</li>
</ol>
<div class="section level4">
<h4 id="update-your-core-packages">Update your ‘core’ packages<a class="anchor" aria-label="anchor" href="#update-your-core-packages"></a>
</h4>
<p>There is a separate function in <code>personalr</code> to update your
list of <code>core</code> packages: <code><a href="../reference/update_core.html">update_core()</a></code>. It can
either append new packages to the existing <code>core</code> or
overwrite it completely (with the logical argument
<code>append</code>).</p>
<p>Assuming you have run the above code and have created the personal
package <code>"mypackage"</code> with the <code>core</code> packages
“dplyr”, “glue” and “purrr” you can add another package, e.g. “tibble”
by running the following code (please note that the example uses
temporary directories and if you run this on your machine it’s easier to
open the project and set <code>path = "."</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/update_core.html">update_core</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">temp_directory</span>, packagename <span class="op">=</span> <span class="st">"mypackage"</span>, core <span class="op">=</span> <span class="st">"tibble"</span>, append <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; ✔ Setting active project to "/tmp/RtmpuQ1QEZ/mypackage".</span></span>
<span><span class="co">#&gt; ✔ Adding 'tibble' to Imports field in DESCRIPTION</span></span>
<span><span class="co">#&gt; ℹ If you really want to update your core you'll have toconfirm the following dialogue...!</span></span>
<span><span class="co">#&gt; ℹ Leaving 'R/core.R' unchanged.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ✔ Adding "1.0.1" to 'Version'.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; • Updating documentation and installing mypackage...</span></span>
<span><span class="co">#&gt; ℹ Loading mypackage</span></span>
<span><span class="co">#&gt; ✖ conflicts.R:51: S3 method `print.mypackage_conflicts` needs @export or</span></span>
<span><span class="co">#&gt;   @exportS3method tag.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Running /opt/R/4.4.3/lib/R/bin/R CMD INSTALL /tmp/RtmpuQ1QEZ/mypackage \</span></span>
<span><span class="co">#&gt;   --install-tests </span></span>
<span><span class="co">#&gt; * installing to library ‘/home/runner/work/_temp/Library’</span></span>
<span><span class="co">#&gt; * installing *source* package ‘mypackage’ ...</span></span>
<span><span class="co">#&gt; ** using staged installation</span></span>
<span><span class="co">#&gt; ** R</span></span>
<span><span class="co">#&gt; ** byte-compile and prepare package for lazy loading</span></span>
<span><span class="co">#&gt; ** help</span></span>
<span><span class="co">#&gt; *** installing help indices</span></span>
<span><span class="co">#&gt; ** building package indices</span></span>
<span><span class="co">#&gt; ** testing if installed package can be loaded from temporary location</span></span>
<span><span class="co">#&gt; ** testing if installed package can be loaded from final location</span></span>
<span><span class="co">#&gt; ** testing if installed package keeps a record of temporary installation path</span></span>
<span><span class="co">#&gt; * DONE (mypackage)</span></span>
<span><span class="co">#&gt; ✔ Setting active project to "&lt;no active project&gt;".</span></span></code></pre>
<p>Now <code>"mypackage"</code> attaches “dplyr”, “glue”, “purrr” and
“tibble” when it is loaded. If you want to overwrite the core (i.e. only
use “tibble” and drop the other packages) just set
<code>append = FALSE</code> in the above code chunk.</p>
</div>
<div class="section level4">
<h4 id="add-your-own-exported-helper-function">Add your own exported helper function<a class="anchor" aria-label="anchor" href="#add-your-own-exported-helper-function"></a>
</h4>
<p>One of the strengths of a package is that you are able to save your
helper functions inside the package and make them available in your code
without littering the Global Environment.</p>
<p>Let’s say you often use the negated version of <code>%in%</code> to
select values that are <em>not</em> in a vector. The typical way to do
it is <code>!value %in% vector</code>. This is somewhat annoying as it’s
hard to read the code and see the exclamation mark at the beginning of
the expression. So now we want to write and export our own little helper
for the negated version of <code>%in%</code>, and we call it
<code>%nin%</code>.</p>
<p>If you run this inside your project</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_r.html" class="external-link">use_r</a></span><span class="op">(</span><span class="st">"nin"</span><span class="op">)</span></span></code></pre></div>
<p>it will create a new script <code>"R/nin.R"</code> and open it
directly. Add the code of your helper function and don’t forget to
export it with <code>#' @export</code> (this means the next time you
document and install your package the new function will be exported and
available for usage).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @export</span></span>
<span><span class="st">'%nin%'</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/funprog.html" class="external-link">Negate</a></span><span class="op">(</span><span class="va">`%in%`</span><span class="op">)</span></span></code></pre></div>
<p>To update your package you should consider changing the package
version to make more clear something changed by running</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_version.html" class="external-link">use_version</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>and afterwards documenting and installing the new version by
running</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">document</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/install.html" class="external-link">install</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://bsky.app/profile/mrcaseb.nflverse.com" class="external-link">Sebastian Carl</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
